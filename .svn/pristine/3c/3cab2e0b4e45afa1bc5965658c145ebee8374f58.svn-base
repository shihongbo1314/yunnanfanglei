(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-commons"],{2129:function(e,t,r){},"352c":function(e,t,r){"use strict";r("2129")},"3c60":function(e,t,r){"use strict";r("6fb1")},"3d0e":function(e,t,r){"use strict";r("6c84")},"3e51":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pagination"},[r("el-pagination",{attrs:{"page-sizes":e.pageSizesArr,total:e.total,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,background:""},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)},n=[],i=(r("a9e3"),{props:{total:{type:Number,default:0},currentPage:{type:Number,default:1},pageSize:{type:Number,default:10},pageSizesArr:{type:Array,default:function(){return[2,5,10,20]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"}},data:function(){return{page:{_pageSize:this.pageSize,_currentPage:this.currentPage}}},methods:{handleSizeChange:function(e){this.page._pageSize=e,this.$emit("pageChange",this.page)},handleCurrentChange:function(e){this.page._currentPage=e,this.$emit("pageChange",this.page)}}}),s=i,o=(r("352c"),r("2877")),l=Object(o["a"])(s,a,n,!1,null,"376b93a0",null);t["a"]=l.exports},"46d7":function(e,t,r){"use strict";r("90ac")},6317:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{id:"ywlbAdd"}},[r("div",{staticClass:"ywlbTab"},[r("table",{staticStyle:{width:"100%"}},[e._m(0),r("tr",{staticClass:"hang"},[r("th",{staticClass:"tr"},[e._v("委托单位")]),r("th",{staticClass:"trs"},[r("el-form",{ref:"formInline",attrs:{model:e.formInline,"label-width":"120px",rules:e.rules,size:"mini"}},[r("el-form-item",{staticStyle:{display:"none"},attrs:{label:"用户编号："}},[r("el-input",{attrs:{disabled:""},model:{value:e.formInline.userid,callback:function(t){e.$set(e.formInline,"userid",t)},expression:"formInline.userid"}})],1),r("el-form-item",{attrs:{label:"档案编号：",prop:"number"}},[r("el-input",{model:{value:e.formInline.number,callback:function(t){e.$set(e.formInline,"number",t)},expression:"formInline.number"}})],1),e.sessionlevel?r("el-form-item",{attrs:{label:"单位名称：",prop:"companyName"}},[r("el-input",{model:{value:e.formInline.companyName,callback:function(t){e.$set(e.formInline,"companyName",t)},expression:"formInline.companyName"}})],1):e._e()],1)],1)]),r("tr",{staticClass:"hang"},[r("th",{staticClass:"tr",staticStyle:{"line-height":"160px"}},[e._v("检测公司")]),r("th",{staticClass:"tr_s"},[r("el-form",{ref:"formInline",attrs:{model:e.formInline,"label-width":"120px",rules:e.rulesFrom,size:"mini"}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"项目名称：",prop:"projectName"}},[r("el-input",{model:{value:e.formInline.projectName,callback:function(t){e.$set(e.formInline,"projectName",t)},expression:"formInline.projectName"}})],1),r("el-form-item",{attrs:{label:"合同金额：",prop:"contractMoney"}},[r("el-input",{attrs:{type:"number"},model:{value:e.formInline.contractMoney,callback:function(t){e.$set(e.formInline,"contractMoney",t)},expression:"formInline.contractMoney"}})],1),r("el-form-item",{attrs:{label:"支付金额：",prop:"payMoney"}},[r("el-input",{attrs:{type:"number"},model:{value:e.formInline.payMoney,callback:function(t){e.$set(e.formInline,"payMoney",t)},expression:"formInline.payMoney"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"分类："}},[r("el-select",{attrs:{placeholder:"分类"},model:{value:e.formInline.type,callback:function(t){e.$set(e.formInline,"type",t)},expression:"formInline.type"}},[r("el-option",{attrs:{label:"民用",value:"民用"}}),r("el-option",{attrs:{label:"危化",value:"危化"}})],1)],1),r("el-form-item",{attrs:{label:"检测单位：",prop:"textCompany"}},[r("el-input",{model:{value:e.formInline.textCompany,callback:function(t){e.$set(e.formInline,"textCompany",t)},expression:"formInline.textCompany"}})],1),"1"==e.sessionlevel?r("el-form-item",{attrs:{label:"开票金额：",prop:"invoiceMoney"}},[r("el-input",{attrs:{type:"number"},model:{value:e.formInline.invoiceMoney,callback:function(t){e.$set(e.formInline,"invoiceMoney",t)},expression:"formInline.invoiceMoney"}})],1):e._e()],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"合同编号：",prop:"contractNumber"}},[r("el-input",{model:{value:e.formInline.contractNumber,callback:function(t){e.$set(e.formInline,"contractNumber",t)},expression:"formInline.contractNumber"}})],1),r("el-form-item",{staticClass:"time",attrs:{label:"合同时间：",prop:"contractTime"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.formInline.contractTime,callback:function(t){e.$set(e.formInline,"contractTime",t)},expression:"formInline.contractTime"}})],1),"1"==e.sessionlevel||"2"==e.sessionlevel?r("el-form-item",{attrs:{label:"共同编制：",prop:"common"}},[r("el-radio-group",{model:{value:e.formInline.common,callback:function(t){e.$set(e.formInline,"common",t)},expression:"formInline.common"}},[r("el-radio",{attrs:{label:1}},[e._v("可以编制")]),r("el-radio",{attrs:{label:0}},[e._v("不可以编制")])],1)],1):e._e()],1),r("el-col",{attrs:{span:6}}),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"合同附件："}},[r("el-upload",{ref:"upload",attrs:{action:"",accept:".pdf,doc,docx","before-upload":e.uploadHttpRequest,"file-list":e.fileList}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary",plain:""},slot:"trigger"},[e._v("点击上传文件")])],1)],1)],1),r("el-col",{attrs:{span:4}})],1)],1)]),r("tr",{staticClass:"hang"},[r("th",{staticClass:"trr",staticStyle:{"line-height":"120px"}},[e._v("备注")]),r("th",{staticClass:"trss"},[r("el-input",{attrs:{type:"textarea",rows:4,placeholder:"本项目主要检测防雷、防静电等内容。"},model:{value:e.formInline.remark,callback:function(t){e.$set(e.formInline,"remark",t)},expression:"formInline.remark"}})],1)]),r("tr",{staticClass:"hang"},[r("th",{staticClass:"trrr"},[r("el-button",{attrs:{type:"success",size:"medium"},on:{click:e.addProject}},[e._v("保存")]),r("el-button",{attrs:{type:"info",size:"medium"},on:{click:e.goback}},[e._v("返回")])],1)])])])])])},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("th",{staticClass:"st"},[e._v("填写备案信息")])])}],i=(r("a9e3"),r("ac1f"),r("1276"),r("b0c0"),r("5319"),r("70f3")),s={name:"XXX",data:function(){return{formInline:{roleId:"",userid:"",number:"",invoice:"",companyName:"",projectName:"",contractMoney:"",payMoney:"",type:"民用",textCompany:"",tester:"",remark:"",file:"",contractTime:"",contractNumber:"",invoiceTime:"",arrivalTime:"",arrivalMoney:"",advanceTime:"",advanceMoney:"",invoiceMoney:"",invoiceNumber:"",arrearsMoney:"",common:0},rules:{number:[{required:!0,message:"此处为必填项",trigger:"blur"}],invoice:[{required:!0,message:"此处为必填项",trigger:"blur"}],companyName:[{required:!0,message:"此处为必填项",trigger:"blur"}]},rulesFrom:{projectName:[{required:!0,message:"此处为必填项",trigger:"blur"}],contractMoney:[{required:!0,message:"此处为必填项",trigger:"blur"}],payMoney:[{required:!0,message:"此处为必填项",trigger:"blur"}],advanceMoney:[{required:!0,message:"此处为必填项",trigger:"blur"}],invoiceMoney:[{required:!0,message:"此处为必填项",trigger:"blur"}],textCompany:[{required:!0,message:"此处为必填项",trigger:"blur"}],invoiceTime:[{required:!0,message:"此处为必填项",trigger:"blur"}],arrivalTime:[{required:!0,message:"此处为必填项",trigger:"blur"}],contractNumber:[{required:!0,message:"此处为必填项",trigger:"blur"}],contractTime:[{required:!0,message:"此处为必填项",trigger:"blur"}],invoiceNumber:[{required:!0,message:"此处为必填项",trigger:"blur"}],arrivalMoney:[{required:!0,message:"此处为必填项",trigger:"blur"}],advanceTime:[{required:!0,message:"此处为必填项",trigger:"blur"}],arrearsMoney:[{required:!0,message:"此处为必填项",trigger:"blur"}]},fileList:[],formData:new FormData,loading:!1,dialogVisible:!1,checkList:[],bianzhiList:[],trueNameId:[]}},computed:{sessionlevel:function(){var e=JSON.parse(sessionStorage.getItem("records"));return e.roleIdMap.level}},watch:{"formInline.contractMoney":function(e){e>1e4&&this.open("合同金额超过10000，请确认无误。")},"formInline.invoiceMoney":function(e){Number(e)>Number(this.formInline.contractMoney)&&(this.open("开票金额不能大于合同金额"),this.formInline.invoiceMoney="")}},mounted:function(){var e=JSON.parse(sessionStorage.getItem("records"));this.formInline.userid=e.id,this.formInline.roleId=e.roleIdMap.id},methods:{open:function(e){this.$alert("<strong>".concat(e,"</strong>"),"提示",{dangerouslyUseHTMLString:!0,type:"warning"})},goback:function(){this.$emit("goback",!1)},uploadHttpRequest:function(e){var t=e.name.split(".")[e.name.split(".").length-1],r="doc"==t.toLowerCase()||"pdf"==t.toLowerCase()||"docx"==t.toLowerCase();r?this.formData.append("file",e):this.$message.error("合同附件必须为doc,docx,pdf格式")},uploadHttpimg:function(e){this.formData.append("sceneFile",e.file)},addProject:function(){var e=this,t=/[\（]/g,r=/[\）]/g,a=/[\【]/g,n=/[\】]/g,s=/[\ ]/g;this.$refs.formInline.validate((function(o){if(!o)return console.log("error submit!!"),!1;0==e.formData.has("file")?e.$message.error("合同附件不能为空"):(e.formData.append("userid",e.formInline.userid),e.formData.append("number",e.formInline.number.replace(t,"(").replace(r,")").replace(a,"[").replace(n,"]").replace(s,"")),e.formData.append("invoice",e.formInline.invoice),e.formData.append("companyName",e.formInline.companyName),e.formData.append("projectName",e.formInline.projectName),e.formData.append("contractMoney",e.formInline.contractMoney),e.formData.append("payMoney",e.formInline.payMoney),e.formData.append("type",e.formInline.type),e.formData.append("textCompany",e.formInline.textCompany),e.formData.append("remark",e.formInline.remark),e.formData.append("contractTime",e.formInline.contractTime),e.formData.append("contractNumber",e.formInline.contractNumber.replace(t,"(").replace(r,")").replace(a,"[").replace(n,"]").replace(s,"")),e.formData.append("invoiceTime",e.formInline.invoiceTime),e.formData.append("arrivalTime",e.formInline.arrivalTime),e.formData.append("arrivalMoney",e.formInline.arrivalMoney),e.formData.append("advanceTime",e.formInline.advanceTime),e.formData.append("advanceMoney",e.formInline.advanceMoney),e.formData.append("invoiceMoney",e.formInline.invoiceMoney),e.formData.append("invoiceNumber",e.formInline.invoiceNumber),e.formData.append("arrearsMoney",e.formInline.arrearsMoney),e.formData.append("roleId",e.formInline.roleId),e.formData.append("common",e.formInline.common),e.loading=!0,Object(i["h"])(e.formData).then((function(t){200==t.data.state?(e.$message.success("项目备案成功"),e.loading=!1,e.formData=new FormData,e.goback()):(e.$message.error("项目备案失败"),e.loading=!1,e.formData=new FormData)})))}))},appendClick:function(){this.dialogVisible=!0}}},o=s,l=(r("46d7"),r("2877")),c=Object(l["a"])(o,a,n,!1,null,"0031b5eb",null);t["a"]=c.exports},"6c84":function(e,t,r){},"6fb1":function(e,t,r){},"90ac":function(e,t,r){},ab52:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{title:"审核记录",visible:e.curTimeLineShow},on:{"update:visible":function(t){e.curTimeLineShow=t},close:e.closeDialog}},[r("div",{staticStyle:{height:"650px","overflow-y":"scroll"}},[r("el-timeline",e._l(e.mydilongList?e.mydilongList:"",(function(t,a){return r("div",{key:a,staticClass:"card"},[r("el-popover",{attrs:{placement:"left",width:"300",trigger:"hover"}},[r("div",{staticClass:"card_bot"},[r("div",{staticClass:"left"},[r("p",[r("span",[e._v(" 项目名称： ")]),e._v(e._s(t.projectMap.project_name||"-")+" ")]),t.fileName?r("p",{staticStyle:{cursor:"pointer"},on:{click:function(r){return r.stopPropagation(),e.curDetail(t.fileName)}}},[r("span",[e._v(" 检测报告： ")]),e._v(" "),r("span",{staticStyle:{color:"#2788EE"}},[e._v(e._s(t.fileName||"-"))])]):e._e(),r("p",[r("span",[e._v(" 备注： ")]),e._v(e._s(t.remarks||"-")+" ")])])]),r("div",{staticClass:"card_top",attrs:{slot:"reference"},slot:"reference"},[r("div",{staticClass:"card_text"},[["4","20","21","22"].includes(t.state)?r("span",[e._v(" "+e._s(t.auditeeMap.user_name)+" "),r("span",[e._v(e._s(null!=t.roleIdInfoMap?"("+t.roleIdInfoMap.name+")":""))])]):r("span",[e._v(" "+e._s(null!=t.reviewerMap?t.reviewerMap.user_name:"-")+" "),r("span",[e._v(e._s(null!=t.roleIdInfoMap?"("+t.roleIdInfoMap.name+")":""))])])]),r("div",{staticClass:"card_filter"},[["18","19"].includes(t.state)?r("svg-icon",{attrs:{"icon-class":"tuihui"}}):e._e(),["20"].includes(t.state)?r("svg-icon",{attrs:{"icon-class":"bianji"}}):e._e(),["5","8","11","14","17","25"].includes(t.state)?r("svg-icon",{attrs:{"icon-class":"weitongguo"}}):e._e(),["6","9","12","15","24"].includes(t.state)?r("svg-icon",{attrs:{"icon-class":"tixing"}}):e._e(),["4","7","10","13","16","22","21","23"].includes(t.state)?r("svg-icon",{attrs:{"icon-class":"tongguo"}}):e._e(),e._v(" "+e._s(e._f("statusFilter")(t.state,null!=t.roleIdInfoMap?t.roleIdInfoMap.name:""))+" ")],1),r("div",{staticClass:"card_time"},[r("span",[e._v(" "+e._s(t.examineTime||"-")+" ")])]),r("div",{staticClass:"card_message"},[r("i",{staticClass:"el-icon-chat-dot-round",class:e.barge==t.id?"active":"",on:{click:function(r){return e.BtnClick(t)}}})])])])],1)})),0)],1)]),e.BoxIShow?r("div",{directives:[{name:"drag",rawName:"v-drag"}],staticClass:"jiaBoxs"},[e.jiaishow?r("div",{staticClass:"jiaBoxTop"},[r("div",{staticClass:"jiaBoxTop-header"},[e._v("选择留言人："),r("i",{staticClass:"el-icon-close",on:{click:e.close}})]),r("el-radio-group",{on:{change:e.changeBox},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},e._l(e.mess_list,(function(t){return r("el-radio",{attrs:{label:t.id}},[e._v(e._s(t.trueName))])})),1)],1):e._e(),e.ishow?r("div",{staticClass:"jiaBox"},[r("div",{staticClass:"header"},[e._v("留言栏")]),r("div",{ref:"messbox",staticClass:"messbox"},e._l(e.senderUserList,(function(t){return r("div",{staticClass:"boxs"},[t.senderUserMap.id!=e.regionId.id?r("div",{staticClass:"leftbox"},[r("span",[e._v(e._s(t.senderUserMap.userName))]),r("span",{staticStyle:{display:"block"}},[e._v(e._s(t.saveTime))]),r("div",{staticClass:"mess_box"},[e._v(" "+e._s(t.content)+" ")])]):r("div",{staticClass:"rightbox"},[r("span",[e._v(e._s(t.senderUserMap.userName))]),r("span",{staticStyle:{display:"block"}},[e._v(e._s(t.saveTime))]),r("div",{staticClass:"mess_box"},[e._v(" "+e._s(t.content)+" ")])])])})),0),r("div",{staticClass:"leaveMess"},[r("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}}),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.postMessList}},[e._v("发送")])],1)]):e._e()]):e._e()],1)},n=[],i=(r("ac1f"),r("1276"),r("caad"),r("c24f")),s={name:"XXX",filters:{statusFilter:function(e,t){if(""!=t&&"编印人"==t){if("15"==e)return"省级编印中";if("16"==e)return"通过";switch(e){case"3":return"备案待通过";case"4":return"已备案";case"5":return"备案申请不通过";case"6":return"州市对接中";case"7":return"州市已对接";case"8":return"州市对接不通过";case"9":return"州市审核中";case"10":return"州市审核通过";case"11":return"州市审核不通过";case"12":return"省级对接中";case"13":return"省级已对接";case"14":return"省级对接不通过";case"15":return"省级审核中";case"16":return"省级已审核";case"17":return"省级审核不通过";case"18":return"市级退回";case"19":return"省级退回";case"20":return"被退回在编辑";case"21":return"再编辑已提交";case"22":return"报告已编制";case"23":return"已转交";case"24":return"被转交";case"25":return"编印撤回";default:break}}else switch(e){case"3":return"备案待通过";case"4":return"已备案";case"5":return"备案申请不通过";case"6":return"州市对接中";case"7":return"州市已对接";case"8":return"州市对接不通过";case"9":return"州市审核中";case"10":return"州市审核通过";case"11":return"州市审核不通过";case"12":return"省级对接中";case"13":return"省级已对接";case"14":return"省级对接不通过";case"15":return"省级审核中";case"16":return"省级已审核";case"17":return"省级审核不通过";case"18":return"市级退回";case"19":return"省级退回";case"20":return"被退回在编辑";case"21":return"再编辑已提交";case"22":return"报告已编制";case"23":return"已转交";case"24":return"被转交";case"25":return"编印撤回";default:break}}},data:function(){return{curTimeLineShow:!1,textarea:"",mydilongList:"",regionId:null,senderUserList:[],renwu:"",receiveUserid:"",senderUserid:"",BoxIShow:!1,jiaishow:!1,ishow:!1,radio:"",mess_list:[],barge:null}},props:["dilongList","TimeLineShow"],watch:{TimeLineShow:function(e){this.curTimeLineShow=e},dilongList:function(e){this.mydilongList=e,this.mydilongList=Array.prototype.reverse.call(this.mydilongList.province)},curTimeLineShow:function(e){e||this.$emit("TimeLineShowlose",e)}},mounted:function(){this.regionId=JSON.parse(sessionStorage.getItem("records"))},methods:{imgCom:function(e){var t=e.split(",");return t.length>0?t[0]:t},curDetail:function(e){this.$emit("docSrcShow",e)},getMessList:function(e,t,r){var a=this;this.receiveUserid=t;var n=JSON.parse(sessionStorage.getItem("records"));Object(i["n"])({examineId:e,receiveUserid:this.receiveUserid,senderUserid:n.id}).then((function(e){200==e.data.state&&null!=e.data.records?a.senderUserList=e.data.records:a.senderUserList=[],void 0!=a.$refs.messbox&&setTimeout((function(){a.$refs.messbox.scrollTop=a.$refs.messbox.scrollHeight}),500)}))},postMessList:function(){var e=this,t=JSON.parse(sessionStorage.getItem("records")),r={senderUserid:t.id,examineId:this.renwu,content:this.textarea,receiveUserid:this.receiveUserid};Object(i["q"])(r).then((function(r){200==r.data.state&&(e.getMessList(e.renwu,e.receiveUserid,t.id),e.textarea="")}))},BtnClick:function(e){var t=this;this.barge=e.id,["4","20","21","22"].includes(e.state)?this.receiveUserid=e.auditeeMap.id:this.receiveUserid=e.reviewerMap.id,this.renwu=e.id;var r=JSON.parse(sessionStorage.getItem("records"));r.id==this.receiveUserid?Object(i["k"])({examineId:e.id,receiveUserid:this.receiveUserid}).then((function(e){204==e.data.state||null==e.data.records?(t.$message.error("没有用户留言"),t.mess_list=[],t.BoxIShow=!1):(t.BoxIShow=!0,t.jiaishow=!0,t.mess_list=e.data.records)})):(this.BoxIShow=!0,this.jiaishow=!1,this.ishow=!0,this.getMessList(this.renwu,this.receiveUserid,r.id))},close:function(){this.BoxIShow=!1,this.ishow=!1,this.jiaishow=!1,this.barge=null,this.mess_list=[],this.radio=""},changeBox:function(){this.ishow=!0,this.getMessList(this.renwu,this.radio,this.senderUserid)},closeDialog:function(){this.close()}},directives:{clickoutside:{bind:function(e,t,r){function a(r){if(e.contains(r.target))return!1;t.expression&&t.value(r)}function n(e){27==e.keyCode&&t.expression&&t.value(e)}e.__vueClickOutSize__=a,e.__vueKeyup__=n,document.addEventListener("keyup",n),document.addEventListener("click",a)},unbind:function(e,t){document.removeEventListener("click",e.__vueClickOutSize__),delete e.__vueClickOutSize__,document.removeEventListener("keyup",e.__vueKeyup__),delete e.__vueKeyup__}},drag:function(e,t){e.onmousedown=function(t){var r=t.pageX-e.offsetLeft,a=t.pageY-e.offsetTop;document.onmousemove=function(t){e.style.left=t.pageX-r+"px",e.style.top=t.pageY-a+"px"},document.onmouseup=function(){document.onmousemove=document.onmouseup=null}}}}},o=s,l=(r("3c60"),r("3d0e"),r("2877")),c=Object(l["a"])(o,a,n,!1,null,"3d5bc6dd",null);t["a"]=c.exports}}]);