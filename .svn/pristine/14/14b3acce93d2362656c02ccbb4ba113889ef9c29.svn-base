(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6930b00a"],{"087e":function(e,t,i){"use strict";i("1a95")},"1a95":function(e,t,i){},4705:function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return l}));i("e9c4");var n,o=i("4360");function r(e){var t="ws://140.249.209.176:8084/LightningDetection/webSocketService?userId=".concat(e);n=new WebSocket(t),n.onmessage=function(e){"1"==e.data?o["a"].commit("app/REFRESH",!0):"2"==e.data?o["a"].commit("app/REFRESH2",!0):"3"==e.data&&setTimeout((function(){o["a"].commit("app/REFRESH3",!1)}),6e3)},n.onopen=a,n.onerror=s,n.onclose=l}function a(){}function s(){this.initWebSocket(),console.log("失败重连")}function l(e){}},"70f3":function(e,t,i){"use strict";i.d(t,"p",(function(){return o})),i.d(t,"f",(function(){return r})),i.d(t,"d",(function(){return a})),i.d(t,"c",(function(){return s})),i.d(t,"k",(function(){return l})),i.d(t,"y",(function(){return c})),i.d(t,"b",(function(){return u})),i.d(t,"z",(function(){return m})),i.d(t,"j",(function(){return p})),i.d(t,"B",(function(){return d})),i.d(t,"i",(function(){return f})),i.d(t,"h",(function(){return h})),i.d(t,"A",(function(){return g})),i.d(t,"w",(function(){return b})),i.d(t,"H",(function(){return v})),i.d(t,"u",(function(){return w})),i.d(t,"q",(function(){return I})),i.d(t,"s",(function(){return y})),i.d(t,"F",(function(){return _})),i.d(t,"r",(function(){return j})),i.d(t,"m",(function(){return S})),i.d(t,"C",(function(){return k})),i.d(t,"t",(function(){return D})),i.d(t,"J",(function(){return x})),i.d(t,"l",(function(){return N})),i.d(t,"I",(function(){return L})),i.d(t,"n",(function(){return O})),i.d(t,"o",(function(){return C})),i.d(t,"D",(function(){return M})),i.d(t,"v",(function(){return P})),i.d(t,"g",(function(){return $})),i.d(t,"x",(function(){return q})),i.d(t,"G",(function(){return T})),i.d(t,"E",(function(){return z})),i.d(t,"e",(function(){return R})),i.d(t,"a",(function(){return U}));var n=i("b775");function o(e){return Object(n["a"])({url:"LightningDetection/project-record/page",method:"post",params:e})}function r(e){return Object(n["a"])({url:"LightningDetection/project-record/saveOrUpdate",method:"post",data:e})}function a(e){return Object(n["a"])({url:"LightningDetection/record-examine/list",method:"post",params:e})}function s(e){return Object(n["a"])({url:"LightningDetection/record-examine/examine",method:"post",params:e})}function l(e){return Object(n["a"])({url:"LightningDetection/user-info/getDockUser",method:"post",params:e})}function c(e){return Object(n["a"])({url:"LightningDetection/project-record/selectDockUser",method:"post",params:e})}function u(e){return Object(n["a"])({url:"LightningDetection/project-record/DockProject",method:"post",params:e})}function m(e){return Object(n["a"])({url:"LightningDetection/record-examine/examineRecord",method:"post",params:e})}function p(e){return Object(n["a"])({url:"LightningDetection/project-record/getCount",method:"post",params:e})}function d(e){return Object(n["a"])({url:"LightningDetection/project-record/summaryData",method:"post",params:e})}function f(e){return Object(n["a"])({url:"LightningDetection/project-record/summaryFile",method:"post",params:e})}function h(e){return Object(n["a"])({url:"LightningDetection/project-record/RecordStatisticsFile",method:"post",params:e})}function g(e){return Object(n["a"])({url:"LightningDetection/project-record/RecordStatisticsData",method:"post",params:e})}function b(e){return Object(n["a"])({url:"LightningDetection/project-record/remove",method:"post",params:e})}function v(e){return Object(n["a"])({url:"LightningDetection/project-record/update",method:"post",data:e})}function w(e){return Object(n["a"])({url:"LightningDetection/project-record/page",method:"post",params:e})}function I(e){return Object(n["a"])({url:"LightningDetection/record-examine/getProjectExamineUser",method:"post",params:e})}function y(e){return Object(n["a"])({url:"LightningDetection/project-record/getProjectTestUser",method:"post",params:e})}function _(e){return Object(n["a"])({url:"LightningDetection/record-examine/updateExamineRemarks",method:"post",params:e})}function j(e){return Object(n["a"])({url:"LightningDetection/project-record/getProjectInfoById",method:"post",params:e})}function S(e){return Object(n["a"])({url:"LightningDetection/record-examine/getLastExamineInfo",method:"post",params:e})}function k(e){return Object(n["a"])({url:"LightningDetection/websocket/sendMsg",method:"post",params:e})}function D(e){return Object(n["a"])({url:"LightningDetection/project-record/multiplex",method:"post",params:e})}function x(e){return Object(n["a"])({url:"LightningDetection/user-info/uploadWebSignImg",method:"post",params:e})}function N(e){return Object(n["a"])({url:"/LightningDetection/user-info/getDockUser",method:"post",params:e})}function L(e){return Object(n["a"])({url:"/LightningDetection/user-info/uploadSignImg",method:"post",data:e})}function O(e){return Object(n["a"])({url:"/LightningDetection/bill-formula/getOne",method:"post",params:e})}function C(e){return Object(n["a"])({url:"/LightningDetection/bill-formula/update",method:"post",params:e})}function M(e){return Object(n["a"])({url:"/LightningDetection/project-record/statistics",method:"post",params:e})}function P(e){return Object(n["a"])({url:"/LightningDetection/project-record/reCallProject",method:"post",params:e})}function $(e){return Object(n["a"])({url:"/LightningDetection/project-record/createSubproject",method:"post",params:e})}function q(e){return Object(n["a"])({url:"/LightningDetection/project-record/selectDockTask",method:"post",params:e})}function T(e){return Object(n["a"])({url:"/LightningDetection/record-examine/updateExamineReviewer",method:"post",params:e})}function z(e){return Object(n["a"])({url:"/LightningDetection/record-temporary/list",method:"post",params:e})}function R(e){return Object(n["a"])({url:"/LightningDetection/project-invoice/saveOrUpdate",method:"post",params:e})}function U(e){return Object(n["a"])({url:"/LightningDetection/project-invoice/delete",method:"post",params:e})}},d96b:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"reference"},[i("div",{staticClass:"All"},[i("div",{staticClass:"condition"},[i("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,size:"mini"}},[i("el-form-item",{attrs:{label:"档案编号："}},[i("el-input",{attrs:{placeholder:"请填写档案编号"},model:{value:e.formInline.number,callback:function(t){e.$set(e.formInline,"number",t)},expression:"formInline.number"}})],1),i("el-form-item",{attrs:{label:"委托方名称："}},[i("el-input",{attrs:{placeholder:"请填写委托方名称"},model:{value:e.formInline.company_name,callback:function(t){e.$set(e.formInline,"company_name",t)},expression:"formInline.company_name"}})],1),i("el-form-item",{attrs:{label:"项目名称："}},[i("el-input",{attrs:{placeholder:"请填写项目名称"},model:{value:e.formInline.project_name,callback:function(t){e.$set(e.formInline,"project_name",t)},expression:"formInline.project_name"}})],1),i("el-form-item",{attrs:{label:"类别："}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formInline.type,callback:function(t){e.$set(e.formInline,"type",t)},expression:"formInline.type"}},[i("el-option",{attrs:{label:"民用",value:"民用"}}),i("el-option",{attrs:{label:"危化",value:"危化"}})],1)],1),i("el-form-item",{attrs:{label:"检测单位："}},[i("el-input",{attrs:{placeholder:"请填写检测单位"},model:{value:e.formInline.textCompany,callback:function(t){e.$set(e.formInline,"textCompany",t)},expression:"formInline.textCompany"}})],1),i("el-form-item",{attrs:{label:"当前负责人："}},[i("el-input",{attrs:{placeholder:"请填写负责人"},model:{value:e.formInline.reviewerName,callback:function(t){e.$set(e.formInline,"reviewerName",t)},expression:"formInline.reviewerName"}})],1),i("el-form-item",{attrs:{label:"项目状态："}},[i("el-select",{staticStyle:{"z-index":"99"},attrs:{placeholder:"请选择",clearable:"",multiple:""},model:{value:e.formInline.appstatusvalue,callback:function(t){e.$set(e.formInline,"appstatusvalue",t)},expression:"formInline.appstatusvalue"}},e._l(e.formInline.appstatus,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),i("div",{staticClass:"footer-table"},[i("el-table",{ref:"multipleTable",staticClass:"classsty",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",border:"",height:"calc(100% - 80px)"}},[i("el-table-column",{attrs:{type:"expand",label:"详细信息",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return["审核人"!=e.sessionName?i("el-form",{staticClass:"demo-table-expand hide",attrs:{"label-position":"left",inline:""}},[t.row.makeUserMap?i("el-form-item",{attrs:{label:"制作人："}},[i("span",[e._v(e._s(t.row.makeUserMap.true_name||"-"))])]):e._e(),i("el-form-item",{attrs:{label:"合同编号："}},[i("span",[e._v(e._s(t.row.contractNumber||"-"))])]),i("el-form-item",{attrs:{label:"合同金额："}},[i("span",[e._v(e._s(t.row.contractMoney||"-"))])]),i("el-form-item",{attrs:{label:"支付金额："}},[i("span",[e._v(e._s(t.row.payMoney||"-"))])]),i("el-form-item",{attrs:{label:"开票时间："}},[i("span",[e._v(e._s(t.row.invoiceTime||"-"))])]),i("el-form-item",{attrs:{label:"入账时间："}},[i("span",[e._v(e._s(t.row.arrivalTime||"-"))])]),i("el-form-item",{attrs:{label:"入账金额："}},[i("span",[e._v(e._s(t.row.arrivalMoney||"-"))])])],1):e._e(),"审核人"!=e.sessionName?i("el-form",{staticClass:"demo-table-expand hide",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"预拨时间："}},[i("span",[e._v(e._s(t.row.advanceTime||"-"))])]),i("el-form-item",{attrs:{label:"预拨金额："}},[i("span",[e._v(e._s(t.row.advanceMoney||"-"))])]),i("el-form-item",{attrs:{label:"开票金额："}},[i("span",[e._v(e._s(t.row.invoiceMoney||"-"))])]),i("el-form-item",{attrs:{label:"发票号码："}},[i("span",[e._v(e._s(t.row.invoiceNumber||"-"))])]),i("el-form-item",{attrs:{label:"欠款金额："}},[i("span",[e._v(e._s(t.row.arrearsMoney||"-"))])])],1):e._e(),"对接人"==e.sessionName||"审核人"==e.sessionName||"终审人"==e.sessionName||"检测人"==e.sessionName?i("el-form",{staticClass:"demo-table-expand hide",attrs:{"label-position":"left",inline:""}},["16"!=t.row.state?i("el-form-item",{attrs:{label:"检测报告痕迹版下载："}},[i("span",{staticStyle:{cursor:"pointer"},on:{click:function(i){return e.Download(t.row.testMarkImg)}}},[e._v(e._s(null!=t.row.testMarkImg?"("+t.row.testMarkImg.split("(")[1]:"-"))])]):e._e(),"16"!=t.row.state?i("el-form-item",{attrs:{label:"检测报告打印版下载："}},[i("span",{staticStyle:{cursor:"pointer"},on:{click:function(i){e.Download(null!=t.row.testPrintImg?t.row.testPrintImg.split(".")[0]+".pdf":"")}}},[e._v(e._s(null!=t.row.testPrintImg?t.row.testPrintImg.split(".")[1].replaceAll(".docx",".pdf"):"-"))])]):e._e(),"16"!=t.row.state?i("el-form-item",{attrs:{label:"检测报告正式版下载："}},[i("span",{staticStyle:{cursor:"pointer"},on:{click:function(i){return e.Download(t.row.testFormalImg)}}},[e._v(e._s(t.row.testFormalImg?"("+t.row.testFormalImg.split("(")[1]:"-"))])]):e._e()],1):e._e(),"编制人"==e.sessionName||"备案人"==e.sessionName||"管理员"==e.sessionName||"编印人"==e.sessionName?i("el-form",{staticClass:"demo-table-expand hide",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"检测报告痕迹版下载："}},[i("span",{staticStyle:{cursor:"pointer"},on:{click:function(i){return e.Download(t.row.testMarkImg)}}},[e._v(e._s(null!=t.row.testMarkImg?"("+t.row.testMarkImg.split("(")[1]:"-"))])]),i("el-form-item",{attrs:{label:"检测报告打印版下载："}},[i("span",{staticStyle:{cursor:"pointer"},on:{click:function(i){e.Download(null!=t.row.testPrintImg?t.row.testPrintImg.split(".")[0]+".pdf":"")}}},[e._v(e._s(null!=t.row.testPrintImg?t.row.testPrintImg.split(".")[1].replaceAll(".docx",".pdf"):"-"))])]),i("el-form-item",{attrs:{label:"检测报告正式版下载："}},[i("span",{staticStyle:{cursor:"pointer"},on:{click:function(i){return e.Download(t.row.testFormalImg)}}},[e._v(e._s(t.row.testFormalImg?"("+t.row.testFormalImg.split("(")[1]:"-"))])])],1):e._e()]}}])}),i("el-table-column",{attrs:{label:"档案编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.number))]}}])}),i("el-table-column",{attrs:{label:"备案人信息",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.userMap.true_name))]}}])}),i("el-table-column",{attrs:{label:"行政区域",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.regionMap.name))]}}])}),i("el-table-column",{attrs:{prop:"companyName",label:"委托方名称",align:"center"}}),i("el-table-column",{attrs:{prop:"projectName",label:"项目名称",align:"center"}}),i("el-table-column",{attrs:{prop:"projectName",label:"原始记录",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[null!=t.row.originalRecordImg?i("el-image",{staticStyle:{width:"50px",height:"50px",cursor:"pointer"},attrs:{fit:"cover",src:"http://140.249.209.176:8084/LightningDetection/ProjectOriginalRecord/"+e.imgCom(t.row.originalRecordImg?t.row.originalRecordImg:"")},on:{click:function(i){return i.stopPropagation(),e.pdfSrcShow2(t.row.originalRecordPath)}}}):i("span",[e._v(" 未上传 ")])]}}])}),"备案人"==e.sessionName||"管理员"==e.sessionName?i("el-table-column",{attrs:{prop:"projectName",label:"合同",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[null!=t.row.contractImg?i("el-image",{staticStyle:{width:"50px",height:"50px",cursor:"pointer"},attrs:{fit:"cover",src:"http://140.249.209.176:8084/LightningDetection/Contract/"+e.imgCom(t.row.contractImg?t.row.contractImg:"")},on:{click:function(i){return i.stopPropagation(),e.pdfSrcShow(t.row.contractFile)}}}):i("span",[e._v(" 未上传 ")])]}}],null,!1,1223562238)}):e._e(),i("el-table-column",{attrs:{prop:"projectName",label:"现场照片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.sceneImg?i("el-image",{staticStyle:{width:"50px",height:"50px",cursor:"pointer"},attrs:{fit:"cover",src:"http://140.249.209.176:8084/LightningDetection/ProjectOriginalRecord/"+e.imgCom(t.row.sceneImg?t.row.sceneImg:"")},on:{click:function(i){return i.stopPropagation(),e.imgShowList(t.row.sceneImg)}}}):i("span",[e._v(" 未上传 ")])]}}])}),"编印人"==e.sessionName?i("el-table-column",{attrs:{prop:"projectName",label:"检测报告",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.testImg?i("span",{staticStyle:{cursor:"pointer",color:"#2788EE"},on:{click:function(i){return i.stopPropagation(),e.docSrcShow(t.row.testImg)}}},[e._v(" "+e._s(t.row.testImg.split(".")[0]+".pdf")+" ")]):i("span",[e._v(" 未上传 ")])]}}],null,!1,677009409)}):e._e(),"编印人"!=e.sessionName?i("el-table-column",{attrs:{prop:"projectName",label:"检测报告",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["编印人"!=e.sessionName&&"16"==t.row.state?i("span",{staticStyle:{cursor:"pointer",color:"#2788EE"},on:{click:function(i){return i.stopPropagation(),e.docSrcShow(t.row.testMarkImg)}}},[e._v(" "+e._s(t.row.testMarkImg)+" ")]):i("span",{staticStyle:{cursor:"pointer",color:"#2788EE"},on:{click:function(i){return i.stopPropagation(),e.docSrcShow(t.row.testImg)}}},[e._v(" "+e._s(t.row.testImg.split(".")[0]+".pdf")+" ")])]}}],null,!1,967805191)}):e._e(),i("el-table-column",{attrs:{label:"模板类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(" "+e._s(e._f("typeFilter")(t.row.multiplex))+" ")])]}}])}),i("el-table-column",{attrs:{prop:"type",label:"类别",align:"center"}}),i("el-table-column",{attrs:{prop:"reviewerName",label:"当前负责人",align:"center"}}),i("el-table-column",{attrs:{prop:"textCompany",label:"检测单位",align:"center"}}),i("el-table-column",{attrs:{label:"项目状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:e._f("stateFilter")(t.row.state,t.row.state)},on:{click:function(i){return i.stopPropagation(),e.statusCondition(t.row.id)}}},[e._v(e._s(e._f("statusFilter")(t.row.state,null!=t.row.examineTaskMap?t.row.examineTaskMap.role_id:"")))]),"16"==t.row.state?i("div",[e._v(e._s(t.row.examineTime))]):e._e()]}}])}),"审核人"!=e.sessionName?i("el-table-column",{attrs:{prop:"handle",label:"操作",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return["编印人"==e.sessionName&&"16"==t.row.state?i("span",{staticClass:"audit",on:{click:function(i){return e.WithDraw(t.row.id)}}},[e._v("撤回")]):e._e(),"对接人"==e.sessionName&&"16"!=t.row.state?i("span",{staticClass:"audit",on:{click:function(i){return e.modification(t.row)}}},[e._v("查询任务")]):e._e()]}}],null,!1,1355496907)}):e._e()],1),i("Page",{attrs:{total:e.total,pageNum:e.current,pageSize:e.size},on:{pageChange:e.pageChange}})],1)]),i("el-dialog",{attrs:{title:"选择对接人",visible:e.dialogVisible,width:"20%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择对接人"},model:{value:e.duijierenID,callback:function(t){e.duijierenID=t},expression:"duijierenID"}},e._l(e.options,(function(t){return i("el-option",{key:t.id,attrs:{label:t.trueName,value:t.id},nativeOn:{click:function(i){return e.itemClick(t)}}})})),1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.submitduijieren}},[e._v("确 定")])],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.pdfShow,expression:"pdfShow"}],staticClass:"pdf"},[i("iframe",{staticClass:"iframes",attrs:{src:e.pdfSrc,frameborder:"0"}}),i("div",{staticClass:"close",on:{click:function(t){t.stopPropagation(),e.pdfShow=!1}}},[e._v(" × ")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.imgShow,expression:"imgShow"}],staticClass:"imgShow"},[i("el-carousel",{attrs:{autoplay:!1,height:"1030px"}},e._l(e.imgList,(function(e){return i("el-carousel-item",{key:e},[i("img",{attrs:{src:e}})])})),1),i("div",{staticClass:"closer",on:{click:function(t){t.stopPropagation(),e.imgShow=!1}}},[e._v(" × ")])],1),i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"修改信息",visible:e.editDilong,width:"1080px"},on:{"update:visible":function(t){e.editDilong=t}}},[i("div",{staticClass:"editCont"},[i("el-form",{attrs:{"label-position":"right","label-width":"100px"}},[i("div",{staticClass:"cont_c_o"},[i("div",{staticStyle:{width:"100%"}},[i("p",[i("el-form-item",{attrs:{label:"项目名称："}},[i("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.enquire.projectName,callback:function(t){e.$set(e.enquire,"projectName",t)},expression:"enquire.projectName"}})],1)],1)]),i("div",{staticStyle:{width:"100%",display:"flex"}},[i("div",{staticStyle:{width:"50%"}},[i("p",[i("el-form-item",{attrs:{label:"委托方名称："}},[i("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.enquire.companyName,callback:function(t){e.$set(e.enquire,"companyName",t)},expression:"enquire.companyName"}})],1)],1)]),i("div",{staticStyle:{width:"50%"}})]),i("div",{staticStyle:{width:"100%",display:"flex"}},[i("div",{staticStyle:{width:"50%"}},[i("p",[i("el-form-item",{attrs:{label:"合同金额："}},[i("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.enquire.contractMoney,callback:function(t){e.$set(e.enquire,"contractMoney",t)},expression:"enquire.contractMoney"}})],1)],1)]),i("div",{staticStyle:{width:"50%"}},[i("p",[i("el-form-item",{attrs:{label:"支付金额："}},[i("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.enquire.payMoney,callback:function(t){e.$set(e.enquire,"payMoney",t)},expression:"enquire.payMoney"}})],1)],1)])]),i("div",{staticStyle:{width:"100%",display:"flex"}},[i("div",{staticStyle:{width:"50%"}},[i("p",[i("el-form-item",{attrs:{label:"类别："}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.enquire.type,callback:function(t){e.$set(e.enquire,"type",t)},expression:"enquire.type"}},[i("el-option",{attrs:{label:"民用",value:"民用"}}),i("el-option",{attrs:{label:"危化",value:"危化"}})],1)],1)],1)]),i("div",{staticStyle:{width:"50%"}},[i("p",[i("el-form-item",{attrs:{label:"检测单位："}},[i("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.enquire.textCompany,callback:function(t){e.$set(e.enquire,"textCompany",t)},expression:"enquire.textCompany"}})],1)],1)])]),i("div",{staticStyle:{width:"100%",display:"flex"}},["编制人"==e.sessionName?i("div",{staticStyle:{width:"50%"}},[i("p",[i("el-form-item",{attrs:{label:"检测人："}},[i("el-input",{nativeOn:{click:function(t){return e.appendClick(t)}},model:{value:e.formInline.tester,callback:function(t){e.$set(e.formInline,"tester",t)},expression:"formInline.tester"}},[i("template",{slot:"append"},[e._v("添加 ")])],2)],1)],1)]):e._e(),i("div",{staticStyle:{width:"50%"}},[i("p",[i("el-form-item",{attrs:{label:"合同编号："}},[i("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.enquire.contractNumber,callback:function(t){e.$set(e.enquire,"contractNumber",t)},expression:"enquire.contractNumber"}})],1)],1)])])]),i("div",{staticStyle:{width:"100%",display:"flex"}},[i("div",{staticStyle:{width:"30%"}},[i("el-form-item",{attrs:{label:"合同附件："}},[i("el-upload",{ref:"upload",attrs:{action:"",accept:".pdf,doc",limit:10,multiple:"","http-request":e.uploadHttpRequest,"file-list":e.fileList}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary",plain:""},slot:"trigger"},[e._v("点击上传文件")])],1)],1)],1),i("div",{staticStyle:{width:"30%"}},["编制人"==e.sessionName?i("el-form-item",{attrs:{label:"现场照片："}},[i("el-upload",{ref:"upload",attrs:{action:"",accept:".jpg,.jpeg,.png",limit:10,multiple:"","http-request":e.uploadHttpimg,"file-list":e.fileList}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary",plain:""},slot:"trigger"},[e._v("点击上传图片")])],1)],1):e._e()],1),6==e.radio?i("div",{staticStyle:{width:"30%"}},[i("el-form-item",{attrs:{label:"模板上传："}},[i("el-upload",{ref:"upload",attrs:{action:"",accept:".doc,.docx",limit:10,multiple:"","http-request":e.uploadHttpdoc,"file-list":e.fileList}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary",plain:""},slot:"trigger"},[e._v("非模板类报告上传")])],1)],1)],1):e._e()]),"编制人"==e.sessionName?i("div",{staticStyle:{padding:"10px 20px"}},[i("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[i("el-radio",{attrs:{label:3}},[e._v("模板类报告")]),i("el-radio",{attrs:{label:6}},[e._v("非模板类报告")])],1)],1):e._e()])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){return e.editDilongclick(2)}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.editDilongclick(1)}}},[e._v("确 定")])],1)]),i("Timeline",{attrs:{dilongList:e.dilongList,TimeLineShow:e.TimeLineShow},on:{TimeLineShowlose:e.TimeLineShowlose,docSrcShow:e.docSrcShow}}),i("el-dialog",{attrs:{title:"复用项目",visible:e.reuse,width:"30%"},on:{"update:visible":function(t){e.reuse=t}}},[i("el-form",{attrs:{model:e.reuseform,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"项目名称"}},[i("el-input",{model:{value:e.reuseform.projectName,callback:function(t){e.$set(e.reuseform,"projectName",t)},expression:"reuseform.projectName"}})],1),i("el-form-item",{attrs:{label:"档案编号"}},[i("el-input",{model:{value:e.reuseform.number,callback:function(t){e.$set(e.reuseform,"number",t)},expression:"reuseform.number"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.reuse=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.multiplex}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"提示",visible:this.$store.state.app.refresh3,width:"25%"},on:{"update:visible":function(t){return e.$set(this.$store.state.app,"refresh3",t)}}},[i("span",{staticStyle:{"font-size":"15px"}},[e._v("如果没有反应，请先")]),i("span",{staticStyle:{color:"red","font-size":"15px"}},[e._v("下载安装Office控件")]),i("span",[e._v("，点此")]),i("span",{staticClass:"fontsty",on:{click:e.Dowkongjian}},[e._v("下载此控件")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.QueDing}},[e._v("确 定")])],1)]),i("el-dialog",{attrs:{title:"检测人列表",visible:e.dialogVisibleone,width:"30%"},on:{"update:visible":function(t){e.dialogVisibleone=t}}},[i("el-checkbox-group",{attrs:{max:3},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.bianzhiList,(function(t){return i("el-checkbox",{key:t.id,attrs:{label:t.trueName}},[e._v(e._s(t.trueName))])})),1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisibleone=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.bianzhiQue}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"审核任务列表",visible:e.dialogVisibletwo,width:"50%"},on:{"update:visible":function(t){e.dialogVisibletwo=t}}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.TaskList}},[i("el-table-column",{attrs:{prop:"projectMap.project_name",label:"项目名称"}}),i("el-table-column",{attrs:{prop:"reviewerMap.true_name",label:"审核人信息"}}),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"small"},on:{click:function(i){return e.Revisionpeople(t.row)}}},[e._v("修改"+e._s(t.row.roleIdInfoMap.name))])]}}])})],1)],1),i("el-dialog",{attrs:{title:e.titleList,visible:e.Visible,width:"25%"},on:{"update:visible":function(t){e.Visible=t}}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.candidate,(function(e){return i("el-option",{key:e.id,attrs:{label:e.trueName,value:e.id}})})),1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.Visible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.updateExamineReviewer}},[e._v("修 改")])],1)],1)],1)},o=[],r=i("1da1"),a=(i("96cf"),i("b0c0"),i("d3b7"),i("25f0"),i("ac1f"),i("1276"),i("d81d"),i("5319"),i("ad9d"),i("a15b"),i("3e51")),s=i("6317"),l=i("ab52"),c=i("70f3"),u=i("c24f"),m=i("ec53"),p=i("4705"),d={name:"XXX",data:function(){return{formInline:{appstatus:[{value:"4",label:"已备案"},{value:"5",label:"备案申请不通过"},{value:"6",label:"州市对接中"},{value:"7",label:"州市已对接"},{value:"8",label:"州市对接不通过"},{value:"9",label:"州市审核中"},{value:"10",label:"州市审核通过"},{value:"11",label:"州市审核不通过"},{value:"12",label:"省级对接中"},{value:"13",label:"省级已对接"},{value:"14",label:"省级对接不通过"},{value:"15",label:"省级审核中"},{value:"16",label:"通过"},{value:"17",label:"省级审核不通过"},{value:"18",label:"市级退回"},{value:"19",label:"省级退回"},{value:"20",label:"被退回在编辑"},{value:"21",label:"被退回在编辑"},{value:"22",label:"报告已编制"},{value:"23",label:"已转交"},{value:"24",label:"被转交"},{value:"25",label:"编印撤回"}],number:"",invoice:"",company_name:"",project_name:"",type:"",textCompany:"",tester:"",appstatusvalue:[],reviewerName:""},tableData:[],TaskList:[],addishow:!1,total:7,current:1,size:5,spans:[],dialogVisible:!1,Visible:!1,reuse:!1,reuseform:{userid:"",projectId:"",number:"",projectName:""},id:null,textarea:"",options:[],duijierenID:"",optionsID:[],shenherenID:[],projectId:"",itemID:"",input1:"",input2:"",input3:"",inputone:"",list:[],listone:[],list_jia:[],listTwojia:[],listyle:!1,pdfImg:"",pdfShow:!1,imgShow:!1,pdfSrc:"",imgList:[],dilongList:"",TimeLineShow:!1,isshow:!1,editDilong:!1,enquire:{makeUserMap:""},formData:new FormData,fileList:[],userid:"",dialogVisibleone:!1,dialogVisibletwo:!1,checkList:[],bianzhiList:[],trueNameId:[],radio:3,loading:!1,roleIdMap:{id:""},titleList:"",candidate:[],selected:"",row:{}}},components:{Page:a["a"],Addnew:s["a"],Timeline:l["a"]},computed:{sessionName:function(){var e=JSON.parse(sessionStorage.getItem("records"));return e.roleIdMap.name},sessionNamelevel:function(){var e=JSON.parse(sessionStorage.getItem("records"));return e.roleIdMap.level},sessionNameid:function(){var e=JSON.parse(sessionStorage.getItem("records"));return e.id},regionId:function(){var e=JSON.parse(sessionStorage.getItem("records"));return e.regionIdMap.id},refresh2:function(){return this.$store.state.app.refresh2}},watch:{addishow:function(e){e||this.getProject()},refresh2:function(e){console.log("已刷新"),e&&location.reload()}},created:function(){this.formInline.number=this.$route.query.number,this.getProject(),this.getDockUserbianzhi();var e=JSON.parse(sessionStorage.getItem("records"));Object(p["a"])(e.id)},destroyed:function(){Object(p["b"])()},methods:{getDockUserbianzhi:function(){var e=this,t=JSON.parse(sessionStorage.getItem("records"));Object(c["l"])({regionId:t.regionIdMap.id,type:"检测人"}).then((function(t){e.bianzhiList=t.data.records}))},getProject:function(e){var t=this,i=JSON.parse(sessionStorage.getItem("records")),n={size:this.size,current:e||this.current,number:this.formInline.number,invoice:this.formInline.invoice,company_name:this.formInline.company_name,type:this.formInline.type,textCompany:this.formInline.textCompany,project_name:this.formInline.project_name,regionId:i.regionIdMap.id,selectUserId:i.id,roleId:i.roleIdMap.id};"备案人"==this.sessionName?n.userid=i.id:"管理员"==this.sessionName?n={size:this.size,current:this.current,number:this.formInline.number,invoice:this.formInline.invoice,company_name:this.formInline.company_name,type:this.formInline.type,textCompany:this.formInline.textCompany,project_name:this.formInline.project_name,regionId:i.regionIdMap.id,selectUserId:i.id,roleId:i.roleIdMap.id}:n.aboutUser=i.id,e&&(n.projectState=this.formInline.appstatusvalue.toString()),"审核人"!=this.sessionName&&"终审人"!=this.sessionName&&"对接人"!=this.sessionName&&"编印人"!=this.sessionName||(n.aboutUser=i.id,n.reviewerName=this.formInline.reviewerName),Object(c["p"])(n).then((function(e){t.tableData=e.data.records,t.total=e.data.total}))},appendClick:function(){this.dialogVisibleone=!0},bianzhiQue:function(){this.checkList.length<1?this.$message.error("用户不能为空"):this.checkList.length<2?this.$message.error("检测人员至少勾选2个"):(this.formInline.tester=this.checkList.toString(),this.dialogVisibleone=!1)},uploadHttpRequest:function(e){0==this.formData.has("file")?this.formData.append("file",e.file):this.formData.set("file",e.file)},uploadHttpimg:function(e){0==this.formData.has("sceneFile")?this.formData.append("sceneFile",e.file):this.formData.set("sceneFile",e.file)},uploadHttpdoc:function(e){0==this.formData.has("testFile")?this.formData.append("testFile",e.file):this.formData.set("testFile",e.file)},imgCom:function(e){var t=e.split(",");return t.length>0?t[0]:t},addClick:function(){this.addishow=!0},goback:function(e){this.addishow=e},onSubmit:function(){this.getProject(1)},pageChange:function(e){this.size=e._pageSize,this.current=e._currentPage,this.getProject()},edit:function(e,t){var i=this,n=JSON.parse(sessionStorage.getItem("records"));m["a"](e,n.id,t,1,n.id,null,null,n.roleIdMap.id),setTimeout((function(){i.$store.commit("app/REFRESH3",!0)}),5e3)},QueDing:function(){this.$store.commit("app/REFRESH3",!1)},duijie:function(e){var t=this;this.projectId=e,this.dialogVisible=!0,this.options=[];var i=JSON.parse(sessionStorage.getItem("records"));Object(c["k"])({regionId:i.regionIdMap.id,type:"对接人"}).then((function(e){e.data.records.map((function(e){t.options.push(e)}))}))},itemClick:function(e){this.roleIdMap.id=e.roleIdMap.id},submitduijieren:function(){var e=this;Object(c["y"])({projectId:this.projectId,DockUserId:this.duijierenID,roleId:this.roleIdMap.id}).then((function(t){"成功"==t.data.stateStr&&200==t.data.state&&(e.$message.success("提交对接人"+t.data.stateStr),e.isshow=!0,e.dialogVisible=!1,e.getProject())}))},pdfSrcShow:function(e){var t=this;this.pdfSrc="http://140.249.209.176:8084/LightningDetection/Contract/"+e,setTimeout((function(){uploadHttpimg,t.pdfShow=!0}),1500)},pdfSrcShow2:function(e){var t=this;this.pdfSrc="http://140.249.209.176:8084/LightningDetection/ProjectOriginalRecord/"+e,setTimeout((function(){t.pdfShow=!0}),1500)},docSrcShow:function(e){var t,i=this;t="doc"==e.split(".")[1]?e.replaceAll("doc","pdf"):e.replaceAll("docx","pdf"),this.pdfSrc="http://140.249.209.176:8084/LightningDetection/ProjectTestRecord/"+t,setTimeout((function(){i.pdfShow=!0}),1500)},Download:function(e){window.open("http://140.249.209.176:8084/LightningDetection/ProjectTestRecord/"+e)},Dowkongjian:function(){window.open("http://140.249.209.176:8084/fanglei/WebOffice.zip")},imgShowList:function(e){var t=this,i=e.split(",");this.imgList=i.map((function(e){return"http://140.249.209.176:8084/LightningDetection/ProjectOriginalRecord/"+e})).join(",").split(","),setTimeout((function(){t.imgShow=!0}),1500)},statusCondition:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var n,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Object(c["z"])({id:e});case 2:n=i.sent,o=n.data,200==o.state&&"成功"==o.stateStr&&(t.dilongList=o.records,t.TimeLineShow=!0);case 5:case"end":return i.stop()}}),i)})))()},removeProject:function(e){var t=this;this.$confirm("此操作将删除该项目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["w"])({projectId:e}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getProject()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},WithDraw:function(e){var t=this;this.$confirm("此操作将撤回该项目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["v"])({projectId:e}).then((function(e){t.$message({type:"success",message:"撤回成功!"}),t.getProject()}))})).catch((function(){t.$message({type:"info",message:"已取消撤回"})}))},updateProject:function(e){this.userid=e.userMap.id,this.editDilong=!0,this.enquire=e},reuseProject:function(e){this.reuse=!0,this.reuseform.projectName=e.projectName,this.reuseform.userid=e.userMap.id,this.reuseform.projectId=e.id,this.reuseform.number=e.number},multiplex:function(){var e=this;""==this.reuseform.projectId?this.$message("项目编号不能为空"):Object(c["t"])({userid:this.reuseform.userid,projectId:this.reuseform.projectId,number:this.reuseform.number}).then((function(t){200==t.data.state?(e.$message.success("复用成功"),e.reuse=!1,e.getProject()):e.$message.error(t.data.message)}))},editDilongclick:function(e){var t=this;void 0!=this.formInline.tester&&""!=this.formInline.tester?(this.trueNameId=[],this.checkList.map((function(e){t.bianzhiList.map((function(i){e==i.trueName&&t.trueNameId.push(i.id)}))})),3==this.radio&&"编制人"==this.sessionName&&0==this.formData.has("multiplex")?this.formData.append("multiplex",0):"编制人"==this.sessionName&&this.formData.append("multiplex",2),this.formData.set("userid",this.userid),this.formData.set("number",this.enquire.number),this.formData.set("invoice",this.enquire.invoice),this.formData.set("companyName",this.enquire.companyName),this.formData.set("projectName",this.enquire.projectName),this.formData.set("contractMoney",this.enquire.contractMoney),this.formData.set("payMoney",this.enquire.payMoney),this.formData.set("type",this.enquire.type),this.formData.set("textCompany",this.enquire.textCompany),this.formData.set("remark",this.enquire.remark),this.formData.set("contractTime",this.enquire.contractTime),this.formData.set("contractNumber",this.enquire.contractNumber),this.formData.set("id",this.enquire.id),1==this.checkList.length&&"编制人"==this.sessionName&&this.formData.has(!1)?this.formData.append("makeUserId",this.trueNameId.toString().split(",")[0]):"编制人"==this.sessionName&&this.formData.set("makeUserId",this.trueNameId.toString().split(",")[0]),2==this.checkList.length&&"编制人"==this.sessionName&&this.formData.has(!1)&&this.formData.has(!1)?(this.formData.append("makeUserId",this.trueNameId.toString().split(",")[0]),this.formData.append("makeUserId1",this.trueNameId.toString().split(",")[1])):"编制人"==this.sessionName&&(this.formData.set("makeUserId",this.trueNameId.toString().split(",")[0]),this.formData.set("makeUserId1",this.trueNameId.toString().split(",")[1])),3==this.checkList.length&&"编制人"==this.sessionName&&this.formData.has(!1)&&this.formData.has(!1)&&this.formData.has(!1)?(alert(6),this.formData.append("makeUserId",this.trueNameId.toString().split(",")[0]),this.formData.append("makeUserId1",this.trueNameId.toString().split(",")[1]),this.formData.append("makeUserId2",this.trueNameId.toString().split(",")[2])):"编制人"==this.sessionName&&3==this.checkList.length&&(this.formData.set("makeUserId",this.trueNameId.toString().split(",")[0]),this.formData.set("makeUserId1",this.trueNameId.toString().split(",")[1]),this.formData.set("makeUserId2",this.trueNameId.toString().split(",")[2])),this.loading=!0,1==e?Object(c["H"])(this.formData).then((function(e){200==e.data.state&&"成功"==e.data.stateStr?(t.$message.success("修改成功"),t.getProject(),t.loading=!1,t.editDilong=!1):(t.$message.error("修改失败"),t.loading=!1,t.editDilong=!1)})):(this.editDilong=!1,this.loading=!1)):this.$message.error("检测人不能为空")},TimeLineShowlose:function(e){this.TimeLineShow=e},modification:function(e){var t=this;this.row=e;var i=JSON.parse(sessionStorage.getItem("records"));Object(c["x"])({projectId:e.id,userId:i.id}).then((function(e){204==e.data.state?t.$message.warning("项目尚未对接无法修改"):(t.TaskList=e.data.records,t.dialogVisibletwo=!0)}))},Revisionpeople:function(e){var t=this;this.Visible=!0,this.titleList="修改"+e.roleIdInfoMap.name+"列表",this.projectIdshenhe=e.id,this.selected=e.reviewerMap.true_name,Object(u["x"])({regionId:e.region_id,roleId:e.roleIdInfoMap.id}).then((function(e){t.candidate=e.data.records}))},updateExamineReviewer:function(){var e=this;Object(c["G"])({examineIds:this.projectIdshenhe,reviewerIds:this.selected}).then((function(t){200==t.data.state?(e.$message.success("修改成功"),e.Visible=!1,e.modification(e.row)):(e.$message.success("修改失败"),e.Visible=!1)}))}}},f=d,h=(i("087e"),i("2877")),g=Object(h["a"])(f,n,o,!1,null,"650284c5",null);t["default"]=g.exports},ec53:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));i("99af"),i("ac1f"),i("466d"),i("1276");function n(e,t,i,n,r,a,s,l,c,u,m,p){decodeURI(window.location.href);var d,f="http://140.249.209.176:9080/fanglei/#/",h="aviation/authorized?id=".concat(e,"&url=").concat(t,"&fileName=").concat(i,"&back=").concat(n,"&makeUserid=").concat(r,"&ID=").concat(a,"&Division=").concat(s,"&identity=").concat(l,"&projectId=").concat(c,"&ishow=").concat(u,"&remarks=").concat(m,"&multiplex=").concat(p),g="WebOffice://|Officectrl.com|",b=o();1==b?(d=g+f+h,window.open(d,"_self")):(d=f+h,window.open(d,"_blank"))}function o(){var e,t,i={},n=navigator.userAgent.toLowerCase();if((e=n.match(/edge\/([\d.]+)/))?i.edge=e[1]:(e=n.match(/rv:([\d.]+)\) like gecko/))||(e=n.match(/msie ([\d.]+)/))?i.ie=e[1]:(e=n.match(/firefox\/([\d.]+)/))?i.firefox=e[1]:(e=n.match(/chrome\/([\d.]+)/))?i.chrome=e[1]:(e=n.match(/opera.([\d.]+)/))?i.opera=e[1]:(e=n.match(/version\/([\d.]+).*safari/))&&(i.safari=e[1]),i.edge)return 1;if(i.ie)return 0;if(i.firefox)return 1;if(i.chrome){t=i.chrome,t.toLowerCase();var o=t.split(".");return parseInt(o[0])>43?1:0}return i.opera||i.safari,1}}}]);